<?xml version="1.0" encoding="utf-8" ?>
<Game xmlns="http://www.kinectitude.com/2012/v1" Name="Breakout" Width="800" Height="600" FirstScene="Game" IsFullScreen="false">

  <Using File="Kinect.dll">
    <Define Name="KinectComponent" Class="Kinectitude.Kinect.KinectComponent" />
    <Define Name="KinectFollowComponent" Class="Kinectitude.Kinect.KinectFollowComponent" />
    <Define Name="KinectManager" Class="Kinectitude.Kinect.KinectManager" />
  </Using>

  <Using File="Physics.dll">
    <Define Name="PhysicsComponent" Class="Kinectitude.Physics.PhysicsComponent" />
    <Define Name="PhysicsManager" Class="Kinectitude.Physics.PhysicsManager" />
    <Define Name="CrossesLineEvent" Class="Kinectitude.Physics.CrossesLineEvent" />
    <Define Name="CollisionEvent" Class="Kinectitude.Physics.CollisionEvent" />
  </Using>

  <Using File="Render.dll">
    <Define Name="RenderComponent" Class="Kinectitude.Render.RenderComponent" />
    <Define Name="RenderManager" Class="Kinectitude.Render.RenderManager" />
    <Define Name="TextRenderComponent" Class="Kinectitude.Render.TextRenderComponent" />
    <Define Name="SetTextAction" Class="Kinectitude.Render.SetTextAction" />
  </Using>

  <Prototype Name="Background">
    <Component Type="TransformComponent" X="400" Y="300" Width="800" Height="600" />
    <Component Type="RenderComponent" FillColor="Black" Shape="Rectangle" />
  </Prototype>
  
  <Prototype Name="Brick">
    <Component Type="TransformComponent" Width="50" Height="16" />
    <Component Type="RenderComponent" FillColor="LimeGreen" Shape="Rectangle" />
    <Component Type="PhysicsComponent" Dx="0" Dy="0" />
    <Event Type="CollisionEvent" Other="!Ball">
      <Action Type="DestroyAction" />
      <Action Type="FireTriggerAction" Trigger="BrickDestroyed" />
    </Event>
  </Prototype>

  <Prototype Name="Paddle" score="0">
    <Component Type="TransformComponent" X="400" Y="775" Width="50" Height="16" />
    <Component Type="RenderComponent" FillColor="LimeGreen" Shape="Rectangle" />
    <Component Type="PhysicsComponent" Dx="0" Dy="0" />
    <Event Type="TriggerOccursEvent" Trigger="BrickDestroyed">
      <Action Type="IncrementAction" Key="score" />
    </Event>
  </Prototype>

  <Prototype Name="Ball">
    <Component Type="TransformComponent" X="400" Y="750" Width="16" Height="16" />
    <Component Type="RenderComponent" FillColor="LimeGreen" Shape="Ellipse" />
    <Component Type="PhysicsComponent" Dx="6" Dy="-6" />
  </Prototype>

  <Scene Name="Game">

    <Entity>
      <Component Type="TextRenderComponent" FontColor="White" Value="{paddle.score}" />
    </Entity>
    
    <Entity Prototype="Brick">
      <Component Type="TransformComponent" X="50" Y="50" />
    </Entity>

    <Entity Prototype="Ball" />
    
    <Entity Prototype="Paddle" Name="paddle" />
    
  </Scene>
  
</Game>